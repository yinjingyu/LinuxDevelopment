


#ifndef CMSGLOOPMGRFORUSERDEFINEDQUEUE_H
#define CMSGLOOPMGRFORUSERDEFINEDQUEUE_H

#include "CMessageLoopManager.h"
#include "CStatus.h"
#include "CMessage.h"

/*
 * =====================================================================================
 *        Class:  CMsgLoopMgrForUserDefinedQueue
 *  Description:  消息循环机制的具体实现（CMessageLoopManager的派生类），
 *  			  使用我们用户自定义的消息队列来 接受并分发消息
 * =====================================================================================
 */
class CMsgLoopMgrForUserDefinedQueue : public CMessageLoopManager
{
	private:

	CMessageQueueByUserDefined * m_pQueue;

	public:

	CMsgLoopMgrForUserDefinedQueue(CMessageQueueByUserDefined * pQueue)
	{
		if(NULL == pQueue)
		{
			throw CStatus(-1,0,"in CMsgLoopMgrForUserDefinedQueue's construction function:paremeter pQueue are NULL");
		}
		m_pQueue = pQueue;
	}

	virtual CMessage * WaitForMessage()
	{
		return m_pQueue->GetMessage()
	}
	
	virtual CStatus Initialize();
	virtual CStatus Uninitialize();
};

#endif
